{% extends 'base.html' %}
{% block title %}All Books{% endblock %}

{% block content %}
{% if header == '' %}
<h2>All Books</h2>
{% else %}
<h2>{{ header }}</h2>
{% endif %}

<h3>Total: {{ books|length }} books</h3>

<div class="books__cards-container">
    {% for book in books %}
    <div class="card">
        <div class="card_img">
            {% if book.covers|length > 0 -%}
            <img src="{{ book.covers[0].cover_url }}" alt="book cover">
            {% else %}
            <img src="/static/img/no-cover.jpg" alt="no book cover available">
            {% endif %}
        </div>

        <div class="card_content">
            <h3><a href="/books/{{ book.book_id }}">{{ book.title }}</a></h3>
            <h4>Id = {{ book.book_id }}</h4>
            <h4>{% if book.authors|length > 1 -%}Authors:
                {% else %}Author:{% endif %}
                {% if book.authors|length == 2 -%}
                {{ book.authors[0].name }} and {{ book.authors[1].name }}
                {% else %}
                {% for i in range(book.authors|length) %}
                {{ book.authors[i].name -}}
                {% if i != book.authors|length - 1 %},
                {% if i == book.authors|length - 2 %}and {% endif %}
                {% endif %}
                {% endfor %}
                {% endif %}
            </h4>
            {% if book.contributor_note != "" %}
            <h4>{{ book.contributor_note }}</h4>
            {% endif %}
            {% if book.walmart_link %}
            <h4><a href={{ book.walmart_link }} target="_blank">Buy on Walmart</a></h4>
            {% else %}
            <h4 color="red">NO LINK</h4>
            {% endif %}
            <!-- <h4>NEW YORK TIMES BESTSELLER in {{ book.lists|length }}
                {% if book.lists|length > 1 -%} lists:
                {% else -%}
                list
                {% endif %}</h4>
            {% for l in book.lists %}
            <div>{{ l.list_name }}</div>
            {% endfor %} -->
            <!-- <h4>Categories:</h4>
            <ul>
                {% for category in book.categories %}
                <li>{{ category.category_name }}</li>
                {% endfor %}
            </ul> -->
        </div>

    </div>

    {% endfor %}
</div>
{% endblock %}